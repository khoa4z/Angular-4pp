<!doctype html>
<html lang="en"  data-ng-app="KenApp">
<head>
   <meta charset="utf-8">
   <meta name="author" content"Ken Nguyen1">
   <title>2048</title>
   
   <!-- CSS -->
   <link rel="stylesheet" href="./bootstrap/css/bootstrap.css">
   <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css"> -->
   <!-- <link rel="stylesheet" href="./2048.css"> -->
   <style>
      [ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak {
         display: none !important;
      }
      .text-center {
        text-align: center;
      }
      div{
         /*border:1px solid red;*/
      }
      .box-container{
         position: relative;
         left: 13px;
      }
      .box{
         min-height: 23%;
         width: 23%;
         background-color: #CCC0B3;
         text-align: center;
         font-size: 35px;
         padding-top: 22px;
         border-radius: 7px;
         margin: 1px;
         color: #CCC0B3;
         border: medium none;
         font-family: "Clear Sans", "Helvetica Neue", Arial, sans-serif;
      }
      .boxEval0{
         color: #CCC0B3;
         background-color: #CCC0B3;
      }
      .boxEval2{
         color: #776E65;
         background-color: #EEE4DA;
         font-size: 50px;
         padding-top: 10px;
         font-weight: 700;
      }
      .boxEval4{
         color: #776E65;
         background-color: #EDE0C8;
         font-size: 50px;
         padding-top: 10px;
         font-weight: 600;
      }
      .boxEval8{
         color:#F9F6F2 ;
         background-color:#F2B179;
         font-size: 50px;
         padding-top: 10px;
         font-weight: 600;
      }
      .boxEval16{
         color:#F9F6F2;
         background-color:#F59563;
         font-size: 50px;
         padding-top: 10px;
         font-weight: 600;
      }
      .boxEval32{
         color:#F9F6F2;
         background-color:#F67C5F;
         font-size: 50px;
         padding-top: 10px;
         font-weight: 600;
      }
      .boxEval64{
         color:#F9F6F2;
         background-color:#F65E3B;
         font-size: 50px;
         padding-top: 10px;
         font-weight: 600;
      }
      .boxEval128{
         color: #F9F6F2;
         background-color: #EDCF72;
         font-size: 44px;
         padding-top: 16px;
         font-weight: 600;
         padding-left: 9px;
      }
      .boxEval256{
         color: #F9F6F2;
         background-color: #EDCF72;
         font-size: 44px;
         padding-top: 16px;
         font-weight: 600;
         padding-left: 9px;
         -webkit-box-shadow: 1px 1px 30px 0px rgba(230,204,126, 0.79);
         -moz-box-shadow:    1px 1px 30px 0px rgba(230,204,126, 0.79);
         box-shadow:         1px 1px 30px 0px rgba(230,204,126, 0.79);
      }
      .boxEval512{
         color: #F9F6F2;
         background-color: #EDC850;
         font-size: 44px;
         padding-top: 16px;
         font-weight: 600;
         padding-left: 9px;
         -webkit-box-shadow: 1px 1px 30px 0px rgba(230,204,126, 0.79);
         -moz-box-shadow:    1px 1px 30px 0px rgba(230,204,126, 0.79);
         box-shadow:         1px 1px 30px 0px rgba(230,204,126, 0.79);
      }
      .boxEval1024{
         color: #F9F6F2;
         background-color: #EDC850;
         font-weight: 600;
         padding-left: 9px;
         -webkit-box-shadow: 1px 1px 30px 0px rgba(230,204,126, 0.79);
         -moz-box-shadow:    1px 1px 30px 0px rgba(230,204,126, 0.79);
         box-shadow:         1px 1px 30px 0px rgba(230,204,126, 0.79);
      }
      .boxEval2048{
         color: #F9F6F2;
         background-color: #EDC850;
         font-weight: 600;
         padding-left: 9px;
         -webkit-box-shadow: 1px 1px 30px 0px rgba(230,204,126, 0.79);
         -moz-box-shadow:    1px 1px 30px 0px rgba(230,204,126, 0.79);
         box-shadow:         1px 1px 30px 0px rgba(230,204,126, 0.79);
      }
      .boxEval4096{
         color: #F9F6F2;
         background-color: black;
         font-weight: 600;
         padding-left: 9px;
      }
      .boxEval16384{
         color: #F9F6F2;
         background-color: #000;
         padding-left: 9px;
         font-size: 27px;
         padding-top: 26px;
      }
   </style>
</head>
<body ng-controller="2048Ctrl" ng-keydown="keyPressed($event)"> <br/> <br/> <br/> <br/><br/>
   <!-- Shit Getting Real -->
   <div class="container">
      <div ng-hide="true" class="border well well-sm loading text-center"><strong>Wait, Big Fish is loading this awesome app.</strong> <br/> Ken Nguyen </div>
      <!-- ng-cloak -->
      <div ng-cloak>
         <div class="border well well-sm loading text-center"> Resetting time: <strong>{{ resetTime }} </strong>; Total Point: {{ point }}</div>

         <div class="row box-container" style=" margin:auto; height:400px; width:400px; border:none">
            <div class="col-xs-3 box" ng-class="showUp(pawn[1].ct)">{{pawn[1].ct}}</div>
            <div class="col-xs-3 box" ng-class="showUp(pawn[2].ct)">{{pawn[2].ct}}</div>
            <div class="col-xs-3 box" ng-class="showUp(pawn[3].ct)">{{pawn[3].ct}}</div>
            <div class="col-xs-3 box" ng-class="showUp(pawn[4].ct)">{{pawn[4].ct}}</div>
            
            <div class="col-xs-3 box" ng-class="showUp(pawn[5].ct)">{{pawn[5].ct}}</div>
            <div class="col-xs-3 box" ng-class="showUp(pawn[6].ct)">{{pawn[6].ct}}</div>
            <div class="col-xs-3 box" ng-class="showUp(pawn[7].ct)">{{pawn[7].ct}}</div>
            <div class="col-xs-3 box" ng-class="showUp(pawn[8].ct)">{{pawn[8].ct}}</div>
            
            <!-- ROW 3 -->
            <div class="col-xs-3 box" ng-class="showUp(pawn[9].ct)">{{pawn[9].ct}}</div>
            <div class="col-xs-3 box" ng-class="showUp(pawn[10].ct)">{{pawn[10].ct}}</div>
            <div class="col-xs-3 box" ng-class="showUp(pawn[11].ct)">{{pawn[11].ct}}</div>
            <div class="col-xs-3 box" ng-class="showUp(pawn[12].ct)">{{pawn[12].ct}}</div>
            
            <!-- ROW 4 -->
            <div class="col-xs-3 box" ng-class="showUp(pawn[13].ct)">{{pawn[13].ct}}</div>
            <div class="col-xs-3 box" ng-class="showUp(pawn[14].ct)">{{pawn[14].ct}}</div>
            <div class="col-xs-3 box" ng-class="showUp(pawn[15].ct)">{{pawn[15].ct}}</div>
            <div class="col-xs-3 box" ng-class="showUp(pawn[16].ct)">{{pawn[16].ct}}</div>
            
         </div>
      </div><!-- ng-cloak -->
   </div><!-- .container -->
   
 
   
   <!-- Angular -->
   <script src="./Angular/angular.js"></script>
   <!-- <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.5/angular.min.js"></script> -->
   
   <!-- Script -->
   <script type="text/javascript" src="./jquery/jquery-1.11.0.js"></script>
<!--    <script type="text/javascript" src="./bootstrap/js/bootstrap.js"></script>
 -->   
<!--    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
   <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script> -->

   
   <script type="text/javascript">
      /*$(function () {
        $('[data-toggle="tooltip"]').tooltip()
      })*/
   
      var KenApp = angular.module("KenApp",[]);
      KenApp.controller('2048Ctrl',Ctrl);
      function Ctrl($scope){
         // 2 4 8 16 32 64 128 256 512 1024 2048 4096 8192 16384 32768
         $scope.reqValue = 64;
         $scope.point = 0;
         $scope.pawn = [   {ct:1},
                           {ct:0}, {ct:0}, {ct:0}, {ct:0},
                           {ct:0}, {ct:0}, {ct:0}, {ct:0},
                           {ct:0}, {ct:0}, {ct:0}, {ct:0},
                           {ct:0}, {ct:0}, {ct:0}, {ct:0}
                        ];
         $scope.pawn2 = [   {ct:1},
                           {ct:0}, {ct:0}, {ct:0}, {ct:0},
                           {ct:0}, {ct:0}, {ct:0}, {ct:0},
                           {ct:0}, {ct:0}, {ct:0}, {ct:0},
                           {ct:0}, {ct:0}, {ct:0}, {ct:0}
                        ];
         $scope.resetTime = 0;
         //0.0 Initialize Value
         /*$scope.pawnA1=0;$scope.pawnB1=2;$scope.pawnC1=4;$scope.pawnD1=8;*/ //... 
         //No need any further stuff since, they will be null anyway

         //0.1 Display none if value ==0
         $scope.showUp = function ShowUp(num){
            if (num == 0 || num==null)
               return "boxEval0";
            switch (num){
               case 2:
                  return "boxEval2";
               case 4:
                  return "boxEval4";
               case 8:
                  return "boxEval8";
               case 16:
                  return "boxEval16";
               case 32:
                  return "boxEval32";
               case 64:
                  return "boxEval64";
               case 128:
                  return "boxEval128";   
               case 256:
                  return "boxEval256";
               case 512:
                  return "boxEval512";
               case 1024:
                  return "boxEval1024";
               case 2048:
                  return "boxEval2048";
               default: 
                  if(num<10000)
                     return "boxEval4096";
                  else
                     return "boxEval16384";
            }
            return "ken";
         }
         //$scope.getRandom();
         //1.2 Random location
         //var value = GetRandom24(); // this value will be either 2 or 4
         GetRandLocation();
         GetRandLocation();
         var countTime=1;
         $scope.sameThing = 0;
         while(isGETthere() == true && countTime < 100){
            console.log("Step " + countTime);
            console.log("Pawn1: [ " + $scope.pawn[1].ct + ", " + $scope.pawn[2].ct + ", " + $scope.pawn[3].ct + ", " + $scope.pawn[4].ct + " ]" + "[ " + $scope.pawn[5].ct + ", " + $scope.pawn[6].ct + ", " + $scope.pawn[7].ct + ", " + $scope.pawn[8].ct + " ]" + "[ " + $scope.pawn[9].ct + ", " + $scope.pawn[10].ct + ", " + $scope.pawn[11].ct + ", " + $scope.pawn[12].ct + " ]" + "[ " + $scope.pawn[13].ct + ", " + $scope.pawn[14].ct + ", " + $scope.pawn[15].ct + ", " + $scope.pawn[16].ct + " ]");
            //console.log("Pawn2: [ " + $scope.pawn2[1].ct + ", " + $scope.pawn2[2].ct + ", " + $scope.pawn2[3].ct + ", " + $scope.pawn2[4].ct + " ]" + "[ " + $scope.pawn2[5].ct + ", " + $scope.pawn2[6].ct + ", " + $scope.pawn2[7].ct + ", " + $scope.pawn2[8].ct + " ]" + "[ " + $scope.pawn2[9].ct + ", " + $scope.pawn2[10].ct + ", " + $scope.pawn2[11].ct + ", " + $scope.pawn2[12].ct + " ]" + "[ " + $scope.pawn2[13].ct + ", " + $scope.pawn2[14].ct + ", " + $scope.pawn2[15].ct + ", " + $scope.pawn2[16].ct + " ]");
            
            /*console.log("[ " + $scope.pawn[1].ct + ", " + $scope.pawn[2].ct + ", " + $scope.pawn[3].ct + ", " + $scope.pawn[4].ct + " ]");
            console.log("[ " + $scope.pawn[5].ct + ", " + $scope.pawn[6].ct + ", " + $scope.pawn[7].ct + ", " + $scope.pawn[8].ct + " ]");
            console.log("[ " + $scope.pawn[9].ct + ", " + $scope.pawn[10].ct + ", " + $scope.pawn[11].ct + ", " + $scope.pawn[12].ct + " ]");
            console.log("[ " + $scope.pawn[13].ct + ", " + $scope.pawn[14].ct + ", " + $scope.pawn[15].ct + ", " + $scope.pawn[16].ct + " ]"); */
            
            //console.log("Pawn1: [ " + $scope.pawn[1].ct + ", " + $scope.pawn[2].ct + ", " + $scope.pawn[3].ct + ", " + $scope.pawn[4].ct + " ]" + "[ " + $scope.pawn[5].ct + ", " + $scope.pawn[6].ct + ", " + $scope.pawn[7].ct + ", " + $scope.pawn[8].ct + " ]" + "[ " + $scope.pawn[9].ct + ", " + $scope.pawn[10].ct + ", " + $scope.pawn[11].ct + ", " + $scope.pawn[12].ct + " ]" + "[ " + $scope.pawn[13].ct + ", " + $scope.pawn[14].ct + ", " + $scope.pawn[15].ct + ", " + $scope.pawn[16].ct + " ]");
            
            //KeyPressed2(GoRandom1234());
            KeyPressed2(GoSmart());
            
            //console.log("GoRandom1234()");
            //console.log("Pawn1: [ " + $scope.pawn[1].ct + ", " + $scope.pawn[2].ct + ", " + $scope.pawn[3].ct + ", " + $scope.pawn[4].ct + " ]" + "[ " + $scope.pawn[5].ct + ", " + $scope.pawn[6].ct + ", " + $scope.pawn[7].ct + ", " + $scope.pawn[8].ct + " ]" + "[ " + $scope.pawn[9].ct + ", " + $scope.pawn[10].ct + ", " + $scope.pawn[11].ct + ", " + $scope.pawn[12].ct + " ]" + "[ " + $scope.pawn[13].ct + ", " + $scope.pawn[14].ct + ", " + $scope.pawn[15].ct + ", " + $scope.pawn[16].ct + " ]");
            //console.log("Pawn2: [ " + $scope.pawn2[1].ct + ", " + $scope.pawn2[2].ct + ", " + $scope.pawn2[3].ct + ", " + $scope.pawn2[4].ct + " ]" + "[ " + $scope.pawn2[5].ct + ", " + $scope.pawn2[6].ct + ", " + $scope.pawn2[7].ct + ", " + $scope.pawn2[8].ct + " ]" + "[ " + $scope.pawn2[9].ct + ", " + $scope.pawn2[10].ct + ", " + $scope.pawn2[11].ct + ", " + $scope.pawn2[12].ct + " ]" + "[ " + $scope.pawn2[13].ct + ", " + $scope.pawn2[14].ct + ", " + $scope.pawn2[15].ct + ", " + $scope.pawn2[16].ct + " ]");

            if(areTheyFkingTheSame()){
               //NO More SPACE?
               console.log("They are fking the same");
               if(nomorespace()){ 
                  countTime=000;
                  console.log("Pawn2 == pawn");
                  //alert("Reset the game:");
                  reset();
               }
               //console.log("Pawn1: [ " + $scope.pawn[1].ct + ", " + $scope.pawn[2].ct + ", " + $scope.pawn[3].ct + ", " + $scope.pawn[4].ct + " ]" + "[ " + $scope.pawn[5].ct + ", " + $scope.pawn[6].ct + ", " + $scope.pawn[7].ct + ", " + $scope.pawn[8].ct + " ]" + "[ " + $scope.pawn[9].ct + ", " + $scope.pawn[10].ct + ", " + $scope.pawn[11].ct + ", " + $scope.pawn[12].ct + " ]" + "[ " + $scope.pawn[13].ct + ", " + $scope.pawn[14].ct + ", " + $scope.pawn[15].ct + ", " + $scope.pawn[16].ct + " ]");
               //console.log("Pawn2: [ " + $scope.pawn2[1].ct + ", " + $scope.pawn2[2].ct + ", " + $scope.pawn2[3].ct + ", " + $scope.pawn2[4].ct + " ]" + "[ " + $scope.pawn2[5].ct + ", " + $scope.pawn2[6].ct + ", " + $scope.pawn2[7].ct + ", " + $scope.pawn2[8].ct + " ]" + "[ " + $scope.pawn2[9].ct + ", " + $scope.pawn2[10].ct + ", " + $scope.pawn2[11].ct + ", " + $scope.pawn2[12].ct + " ]" + "[ " + $scope.pawn2[13].ct + ", " + $scope.pawn2[14].ct + ", " + $scope.pawn2[15].ct + ", " + $scope.pawn2[16].ct + " ]");
            
            }
            else{
               copy1to2();
               //$scope.pawn2 = $scope.pawn;
            }
            countTime++;
         }
         
         function reset(){
            $scope.pawn = [   {ct:1},
                           {ct:0}, {ct:0}, {ct:0}, {ct:0},
                           {ct:0}, {ct:0}, {ct:0}, {ct:0},
                           {ct:0}, {ct:0}, {ct:0}, {ct:0},
                           {ct:0}, {ct:0}, {ct:0}, {ct:0}
                        ];
            $scope.pawn2 = [   {ct:1},
                              {ct:0}, {ct:0}, {ct:0}, {ct:0},
                              {ct:0}, {ct:0}, {ct:0}, {ct:0},
                              {ct:0}, {ct:0}, {ct:0}, {ct:0},
                              {ct:0}, {ct:0}, {ct:0}, {ct:0}
                           ];
            GetRandLocation();
            GetRandLocation();   
            $scope.resetTime += 1;
            $scope.point = 0;
         }
         function nomorespace(){
            var i;
            var counting=0;
            for(i = 1; i < 17; i++){
               if($scope.pawn[i].ct != 0)
                  counting++;
            }
            if(counting == 16)
               return true;
            else 
               return false;
         }
         function copy1to2(){
            var i;
            for(i = 1; i < 17; i++){
               //console.log($scope.pawn[i].ct);
               $scope.pawn2[i].ct = $scope.pawn[i].ct;
            }
         }
         function areTheyFkingTheSame(){
            var counting = 0;
            var i = 1;
            for(i = 1; i < 17; i++){
               if($scope.pawn[i].ct == $scope.pawn2[i].ct){
                  counting++;
               }
            }
            console.log("Counting " + counting);
            if(counting == 16)
               return true;
            else
               return false;
         }
         function isGETthere(){
            var i = 1;
            for(i = 1; i < 17; i++){
               if( $scope.pawn[i].ct == $scope.reqValue){
                  console.log("found it");
                  return false;
               }
            }
            return true;
         }
         function GetRandLocation(){
            var count = 0;
            var emptyList = [];
            var i = 0;
            for(i = 1; i < 17; i++){
               if( $scope.pawn[i].ct == 0){
                 count++;
                 emptyList[emptyList.length] = i;
               }
            }
            var ranNumber =  emptyList[Math.floor(Math.random() * emptyList.length)];
            if (ranNumber === undefined){
               console.log("Out of space");
               //validation check
            }
            else if(ranNumber != undefined || ranNumber != null || ranNumber != ''){
               $scope.pawn[ranNumber].ct = GetRandom24();
            }
         }
         function GoSmart(){
            //This is the smartest function I will 
            // Up: 38
            // DOWN: 40
            // Left: 37
            // Right: 39
            //mostly return left:
            if(!areTheyFkingTheSame()){
               console.log("NOT SAME, GOOD IDIOT");
               return 37;
            }
            else {
               console.log("GO Smart: they are FKing the same now");
               $scope.sameThing++;
               if($scope.sameThing == 5){
                  $scope.sameThing= 0;
                  return 40;
               }
               return Math.floor(Math.random()*2) + 37;
            }
         }
         
         function KeyPressed2(ev) {
            //$scope.pressed = ev.which;
            var getValue;
            var flag = 0;
            //console.log(ev);
            if(ev == 38){
               $scope.pressed = "up";
               // Col 1:
                  getValue = ToUp01($scope.pawn[1].ct,$scope.pawn[5].ct,$scope.pawn[9].ct,$scope.pawn[13].ct);
                  if($scope.pawn[1].ct == getValue[0] && 
                     $scope.pawn[5].ct == getValue[1] && 
                     $scope.pawn[9].ct == getValue[2] && 
                     $scope.pawn[13].ct == getValue[3])
                     flag++;
                  $scope.pawn[1].ct = getValue[0];
                  $scope.pawn[5].ct = getValue[1];
                  $scope.pawn[9].ct = getValue[2];
                  $scope.pawn[13].ct = getValue[3];
               // Col 2:
                  getValue = ToUp01($scope.pawn[2].ct,$scope.pawn[6].ct,$scope.pawn[10].ct,$scope.pawn[14].ct);
                  if($scope.pawn[2].ct == getValue[0] && 
                     $scope.pawn[6].ct == getValue[1] && 
                     $scope.pawn[10].ct == getValue[2] && 
                     $scope.pawn[14].ct == getValue[3])
                     flag++;
                  $scope.pawn[2].ct = getValue[0];
                  $scope.pawn[6].ct = getValue[1];
                  $scope.pawn[10].ct = getValue[2];
                  $scope.pawn[14].ct = getValue[3];
               // Col 3:
                  getValue = ToUp01($scope.pawn[3].ct,$scope.pawn[7].ct,$scope.pawn[11].ct,$scope.pawn[15].ct);
                  if($scope.pawn[3].ct == getValue[0] && 
                     $scope.pawn[7].ct == getValue[1] && 
                     $scope.pawn[11].ct == getValue[2] && 
                     $scope.pawn[15].ct == getValue[3])
                     flag++;
                  $scope.pawn[3].ct = getValue[0];
                  $scope.pawn[7].ct = getValue[1];
                  $scope.pawn[11].ct = getValue[2];
                  $scope.pawn[15].ct = getValue[3];
               // Col 4:
                  //ToUp01($scope.pawn[13].ct,$scope.pawn[14].ct,$scope.pawn[15].ct,$scope.pawn[16].ct);
                  getValue = ToUp01($scope.pawn[4].ct,$scope.pawn[8].ct,$scope.pawn[12].ct,$scope.pawn[16].ct);
                  if($scope.pawn[4].ct == getValue[0] && 
                     $scope.pawn[8].ct == getValue[1] && 
                     $scope.pawn[12].ct == getValue[2] && 
                     $scope.pawn[16].ct == getValue[3])
                     flag++;
                  $scope.pawn[4].ct = getValue[0];
                  $scope.pawn[8].ct = getValue[1];
                  $scope.pawn[12].ct = getValue[2];
                  $scope.pawn[16].ct = getValue[3];
                  
               if(flag != 4) GetRandLocation();  
            }
            if(ev == 40){
               $scope.pressed = "down";
               // Col 1:
                  getValue = ToDown01($scope.pawn[1].ct,$scope.pawn[5].ct,$scope.pawn[9].ct,$scope.pawn[13].ct);
                  if($scope.pawn[1].ct == getValue[0] && 
                     $scope.pawn[5].ct == getValue[1] && 
                     $scope.pawn[9].ct == getValue[2] && 
                     $scope.pawn[13].ct == getValue[3])
                     flag++;
                  $scope.pawn[1].ct = getValue[0];
                  $scope.pawn[5].ct = getValue[1];
                  $scope.pawn[9].ct = getValue[2];
                  $scope.pawn[13].ct = getValue[3];
               // Col 2:
                  getValue = ToDown01($scope.pawn[2].ct,$scope.pawn[6].ct,$scope.pawn[10].ct,$scope.pawn[14].ct);
                  if($scope.pawn[2].ct == getValue[0] && 
                     $scope.pawn[6].ct == getValue[1] && 
                     $scope.pawn[10].ct == getValue[2] && 
                     $scope.pawn[14].ct == getValue[3])
                     flag++;
                  $scope.pawn[2].ct = getValue[0];
                  $scope.pawn[6].ct = getValue[1];
                  $scope.pawn[10].ct = getValue[2];
                  $scope.pawn[14].ct = getValue[3];
               // Col 3:
                  getValue = ToDown01($scope.pawn[3].ct,$scope.pawn[7].ct,$scope.pawn[11].ct,$scope.pawn[15].ct);
                  if($scope.pawn[3].ct == getValue[0] && 
                     $scope.pawn[7].ct == getValue[1] && 
                     $scope.pawn[11].ct == getValue[2] && 
                     $scope.pawn[15].ct == getValue[3])
                     flag++;
                  $scope.pawn[3].ct = getValue[0];
                  $scope.pawn[7].ct = getValue[1];
                  $scope.pawn[11].ct = getValue[2];
                  $scope.pawn[15].ct = getValue[3];
               // Col 4:
                  getValue = ToDown01($scope.pawn[4].ct,$scope.pawn[8].ct,$scope.pawn[12].ct,$scope.pawn[16].ct);
                  if($scope.pawn[4].ct == getValue[0] && 
                     $scope.pawn[8].ct == getValue[1] && 
                     $scope.pawn[12].ct == getValue[2] && 
                     $scope.pawn[16].ct == getValue[3])
                     flag++;
                  $scope.pawn[4].ct = getValue[0];
                  $scope.pawn[8].ct = getValue[1];
                  $scope.pawn[12].ct = getValue[2];
                  $scope.pawn[16].ct = getValue[3];
                  
               if(flag != 4) GetRandLocation();  
            }
            if(ev == 37){
               $scope.pressed = "left";
               // Col 1:
                  getValue = ToUp01($scope.pawn[1].ct,$scope.pawn[2].ct,$scope.pawn[3].ct,$scope.pawn[4].ct);
                  if($scope.pawn[01].ct == getValue[0] && 
                     $scope.pawn[02].ct == getValue[1] && 
                     $scope.pawn[03].ct == getValue[2] && 
                     $scope.pawn[04].ct == getValue[3])
                     flag++;
                  $scope.pawn[01].ct = getValue[0];
                  $scope.pawn[02].ct = getValue[1];
                  $scope.pawn[03].ct = getValue[2];
                  $scope.pawn[04].ct = getValue[3];
               // Col 2:
                  getValue = ToUp01($scope.pawn[5].ct,$scope.pawn[6].ct,$scope.pawn[7].ct,$scope.pawn[8].ct);
                  if($scope.pawn[05].ct == getValue[0] && 
                     $scope.pawn[06].ct == getValue[1] && 
                     $scope.pawn[07].ct == getValue[2] && 
                     $scope.pawn[08].ct == getValue[3])
                     flag++;
                  $scope.pawn[05].ct = getValue[0];
                  $scope.pawn[06].ct = getValue[1];
                  $scope.pawn[07].ct = getValue[2];
                  $scope.pawn[08].ct = getValue[3];
               // Col 3:
                  getValue = ToUp01($scope.pawn[9].ct,$scope.pawn[10].ct,$scope.pawn[11].ct,$scope.pawn[12].ct);
                  if($scope.pawn[09].ct == getValue[0] && 
                     $scope.pawn[10].ct == getValue[1] && 
                     $scope.pawn[11].ct == getValue[2] && 
                     $scope.pawn[12].ct == getValue[3])
                     flag++;
                  $scope.pawn[09].ct = getValue[0];
                  $scope.pawn[10].ct = getValue[1];
                  $scope.pawn[11].ct = getValue[2];
                  $scope.pawn[12].ct = getValue[3];
               // Col 4:
                  getValue = ToUp01($scope.pawn[13].ct,$scope.pawn[14].ct,$scope.pawn[15].ct,$scope.pawn[16].ct);
                  if($scope.pawn[13].ct == getValue[0] && 
                     $scope.pawn[14].ct == getValue[1] && 
                     $scope.pawn[15].ct == getValue[2] && 
                     $scope.pawn[16].ct == getValue[3])
                     flag++;
                  $scope.pawn[13].ct = getValue[0];
                  $scope.pawn[14].ct = getValue[1];
                  $scope.pawn[15].ct = getValue[2];
                  $scope.pawn[16].ct = getValue[3];
                  
               if(flag != 4) GetRandLocation();  
            }
            if(ev == 39){
               $scope.pressed = "right";
               
               // Col 1:
                  getValue = ToDown01($scope.pawn[1].ct,$scope.pawn[2].ct,$scope.pawn[3].ct,$scope.pawn[4].ct);
                  if($scope.pawn[01].ct == getValue[0] && 
                     $scope.pawn[02].ct == getValue[1] && 
                     $scope.pawn[03].ct == getValue[2] && 
                     $scope.pawn[04].ct == getValue[3])
                     flag++;
                  $scope.pawn[01].ct = getValue[0];
                  $scope.pawn[02].ct = getValue[1];
                  $scope.pawn[03].ct = getValue[2];
                  $scope.pawn[04].ct = getValue[3];
               // Col 2:
                  getValue = ToDown01($scope.pawn[5].ct,$scope.pawn[6].ct,$scope.pawn[7].ct,$scope.pawn[8].ct);
                  if($scope.pawn[05].ct == getValue[0] && 
                     $scope.pawn[06].ct == getValue[1] && 
                     $scope.pawn[07].ct == getValue[2] && 
                     $scope.pawn[08].ct == getValue[3])
                     flag++;
                  $scope.pawn[05].ct = getValue[0];
                  $scope.pawn[06].ct = getValue[1];
                  $scope.pawn[07].ct = getValue[2];
                  $scope.pawn[08].ct = getValue[3];
               // Col 3:
                  getValue = ToDown01($scope.pawn[9].ct,$scope.pawn[10].ct,$scope.pawn[11].ct,$scope.pawn[12].ct);
                  if($scope.pawn[09].ct == getValue[0] && 
                     $scope.pawn[10].ct == getValue[1] && 
                     $scope.pawn[11].ct == getValue[2] && 
                     $scope.pawn[12].ct == getValue[3])
                     flag++;
                  $scope.pawn[09].ct = getValue[0];
                  $scope.pawn[10].ct = getValue[1];
                  $scope.pawn[11].ct = getValue[2];
                  $scope.pawn[12].ct = getValue[3];
               // Col 4:
                  getValue = ToDown01($scope.pawn[13].ct,$scope.pawn[14].ct,$scope.pawn[15].ct,$scope.pawn[16].ct);
                  if($scope.pawn[13].ct == getValue[0] && 
                     $scope.pawn[14].ct == getValue[1] && 
                     $scope.pawn[15].ct == getValue[2] && 
                     $scope.pawn[16].ct == getValue[3])
                     flag++;
                  $scope.pawn[13].ct = getValue[0];
                  $scope.pawn[14].ct = getValue[1];
                  $scope.pawn[15].ct = getValue[2];
                  $scope.pawn[16].ct = getValue[3];
                  
               if(flag != 4) GetRandLocation();  
            }            
            /*if (ev.which==13) alert('Stop hitting return :p');*/
         }
           
         $scope.keyPressed = function(ev) {
            //$scope.pressed = ev.which;
            var getValue;
            var flag = 0;
            if(ev.which == 38){
               $scope.pressed = "up";
               // Col 1:
                  getValue = ToUp01($scope.pawn[1].ct,$scope.pawn[5].ct,$scope.pawn[9].ct,$scope.pawn[13].ct);
                  if($scope.pawn[1].ct == getValue[0] && 
                     $scope.pawn[5].ct == getValue[1] && 
                     $scope.pawn[9].ct == getValue[2] && 
                     $scope.pawn[13].ct == getValue[3])
                     flag++;
                  $scope.pawn[1].ct = getValue[0];
                  $scope.pawn[5].ct = getValue[1];
                  $scope.pawn[9].ct = getValue[2];
                  $scope.pawn[13].ct = getValue[3];
               // Col 2:
                  getValue = ToUp01($scope.pawn[2].ct,$scope.pawn[6].ct,$scope.pawn[10].ct,$scope.pawn[14].ct);
                  if($scope.pawn[2].ct == getValue[0] && 
                     $scope.pawn[6].ct == getValue[1] && 
                     $scope.pawn[10].ct == getValue[2] && 
                     $scope.pawn[14].ct == getValue[3])
                     flag++;
                  $scope.pawn[2].ct = getValue[0];
                  $scope.pawn[6].ct = getValue[1];
                  $scope.pawn[10].ct = getValue[2];
                  $scope.pawn[14].ct = getValue[3];
               // Col 3:
                  getValue = ToUp01($scope.pawn[3].ct,$scope.pawn[7].ct,$scope.pawn[11].ct,$scope.pawn[15].ct);
                  if($scope.pawn[3].ct == getValue[0] && 
                     $scope.pawn[7].ct == getValue[1] && 
                     $scope.pawn[11].ct == getValue[2] && 
                     $scope.pawn[15].ct == getValue[3])
                     flag++;
                  $scope.pawn[3].ct = getValue[0];
                  $scope.pawn[7].ct = getValue[1];
                  $scope.pawn[11].ct = getValue[2];
                  $scope.pawn[15].ct = getValue[3];
               // Col 4:
                  //ToUp01($scope.pawn[13].ct,$scope.pawn[14].ct,$scope.pawn[15].ct,$scope.pawn[16].ct);
                  getValue = ToUp01($scope.pawn[4].ct,$scope.pawn[8].ct,$scope.pawn[12].ct,$scope.pawn[16].ct);
                  if($scope.pawn[4].ct == getValue[0] && 
                     $scope.pawn[8].ct == getValue[1] && 
                     $scope.pawn[12].ct == getValue[2] && 
                     $scope.pawn[16].ct == getValue[3])
                     flag++;
                  $scope.pawn[4].ct = getValue[0];
                  $scope.pawn[8].ct = getValue[1];
                  $scope.pawn[12].ct = getValue[2];
                  $scope.pawn[16].ct = getValue[3];
                  
               if(flag != 4) GetRandLocation();  
            }
            if(ev.which == 40){
               $scope.pressed = "down";
               // Col 1:
                  getValue = ToDown01($scope.pawn[1].ct,$scope.pawn[5].ct,$scope.pawn[9].ct,$scope.pawn[13].ct);
                  if($scope.pawn[1].ct == getValue[0] && 
                     $scope.pawn[5].ct == getValue[1] && 
                     $scope.pawn[9].ct == getValue[2] && 
                     $scope.pawn[13].ct == getValue[3])
                     flag++;
                  $scope.pawn[1].ct = getValue[0];
                  $scope.pawn[5].ct = getValue[1];
                  $scope.pawn[9].ct = getValue[2];
                  $scope.pawn[13].ct = getValue[3];
               // Col 2:
                  getValue = ToDown01($scope.pawn[2].ct,$scope.pawn[6].ct,$scope.pawn[10].ct,$scope.pawn[14].ct);
                  if($scope.pawn[2].ct == getValue[0] && 
                     $scope.pawn[6].ct == getValue[1] && 
                     $scope.pawn[10].ct == getValue[2] && 
                     $scope.pawn[14].ct == getValue[3])
                     flag++;
                  $scope.pawn[2].ct = getValue[0];
                  $scope.pawn[6].ct = getValue[1];
                  $scope.pawn[10].ct = getValue[2];
                  $scope.pawn[14].ct = getValue[3];
               // Col 3:
                  getValue = ToDown01($scope.pawn[3].ct,$scope.pawn[7].ct,$scope.pawn[11].ct,$scope.pawn[15].ct);
                  if($scope.pawn[3].ct == getValue[0] && 
                     $scope.pawn[7].ct == getValue[1] && 
                     $scope.pawn[11].ct == getValue[2] && 
                     $scope.pawn[15].ct == getValue[3])
                     flag++;
                  $scope.pawn[3].ct = getValue[0];
                  $scope.pawn[7].ct = getValue[1];
                  $scope.pawn[11].ct = getValue[2];
                  $scope.pawn[15].ct = getValue[3];
               // Col 4:
                  getValue = ToDown01($scope.pawn[4].ct,$scope.pawn[8].ct,$scope.pawn[12].ct,$scope.pawn[16].ct);
                  if($scope.pawn[4].ct == getValue[0] && 
                     $scope.pawn[8].ct == getValue[1] && 
                     $scope.pawn[12].ct == getValue[2] && 
                     $scope.pawn[16].ct == getValue[3])
                     flag++;
                  $scope.pawn[4].ct = getValue[0];
                  $scope.pawn[8].ct = getValue[1];
                  $scope.pawn[12].ct = getValue[2];
                  $scope.pawn[16].ct = getValue[3];
                  
               if(flag != 4) GetRandLocation();  
            }
            if(ev.which == 37){
               $scope.pressed = "left";
               // Col 1:
                  getValue = ToUp01($scope.pawn[1].ct,$scope.pawn[2].ct,$scope.pawn[3].ct,$scope.pawn[4].ct);
                  if($scope.pawn[01].ct == getValue[0] && 
                     $scope.pawn[02].ct == getValue[1] && 
                     $scope.pawn[03].ct == getValue[2] && 
                     $scope.pawn[04].ct == getValue[3])
                     flag++;
                  $scope.pawn[01].ct = getValue[0];
                  $scope.pawn[02].ct = getValue[1];
                  $scope.pawn[03].ct = getValue[2];
                  $scope.pawn[04].ct = getValue[3];
               // Col 2:
                  getValue = ToUp01($scope.pawn[5].ct,$scope.pawn[6].ct,$scope.pawn[7].ct,$scope.pawn[8].ct);
                  if($scope.pawn[05].ct == getValue[0] && 
                     $scope.pawn[06].ct == getValue[1] && 
                     $scope.pawn[07].ct == getValue[2] && 
                     $scope.pawn[08].ct == getValue[3])
                     flag++;
                  $scope.pawn[05].ct = getValue[0];
                  $scope.pawn[06].ct = getValue[1];
                  $scope.pawn[07].ct = getValue[2];
                  $scope.pawn[08].ct = getValue[3];
               // Col 3:
                  getValue = ToUp01($scope.pawn[9].ct,$scope.pawn[10].ct,$scope.pawn[11].ct,$scope.pawn[12].ct);
                  if($scope.pawn[09].ct == getValue[0] && 
                     $scope.pawn[10].ct == getValue[1] && 
                     $scope.pawn[11].ct == getValue[2] && 
                     $scope.pawn[12].ct == getValue[3])
                     flag++;
                  $scope.pawn[09].ct = getValue[0];
                  $scope.pawn[10].ct = getValue[1];
                  $scope.pawn[11].ct = getValue[2];
                  $scope.pawn[12].ct = getValue[3];
               // Col 4:
                  getValue = ToUp01($scope.pawn[13].ct,$scope.pawn[14].ct,$scope.pawn[15].ct,$scope.pawn[16].ct);
                  if($scope.pawn[13].ct == getValue[0] && 
                     $scope.pawn[14].ct == getValue[1] && 
                     $scope.pawn[15].ct == getValue[2] && 
                     $scope.pawn[16].ct == getValue[3])
                     flag++;
                  $scope.pawn[13].ct = getValue[0];
                  $scope.pawn[14].ct = getValue[1];
                  $scope.pawn[15].ct = getValue[2];
                  $scope.pawn[16].ct = getValue[3];
                  
               if(flag != 4) GetRandLocation();  
            }
            if(ev.which == 39){
               $scope.pressed = "right";
               
               // Col 1:
                  getValue = ToDown01($scope.pawn[1].ct,$scope.pawn[2].ct,$scope.pawn[3].ct,$scope.pawn[4].ct);
                  if($scope.pawn[01].ct == getValue[0] && 
                     $scope.pawn[02].ct == getValue[1] && 
                     $scope.pawn[03].ct == getValue[2] && 
                     $scope.pawn[04].ct == getValue[3])
                     flag++;
                  $scope.pawn[01].ct = getValue[0];
                  $scope.pawn[02].ct = getValue[1];
                  $scope.pawn[03].ct = getValue[2];
                  $scope.pawn[04].ct = getValue[3];
               // Col 2:
                  getValue = ToDown01($scope.pawn[5].ct,$scope.pawn[6].ct,$scope.pawn[7].ct,$scope.pawn[8].ct);
                  if($scope.pawn[05].ct == getValue[0] && 
                     $scope.pawn[06].ct == getValue[1] && 
                     $scope.pawn[07].ct == getValue[2] && 
                     $scope.pawn[08].ct == getValue[3])
                     flag++;
                  $scope.pawn[05].ct = getValue[0];
                  $scope.pawn[06].ct = getValue[1];
                  $scope.pawn[07].ct = getValue[2];
                  $scope.pawn[08].ct = getValue[3];
               // Col 3:
                  getValue = ToDown01($scope.pawn[9].ct,$scope.pawn[10].ct,$scope.pawn[11].ct,$scope.pawn[12].ct);
                  if($scope.pawn[09].ct == getValue[0] && 
                     $scope.pawn[10].ct == getValue[1] && 
                     $scope.pawn[11].ct == getValue[2] && 
                     $scope.pawn[12].ct == getValue[3])
                     flag++;
                  $scope.pawn[09].ct = getValue[0];
                  $scope.pawn[10].ct = getValue[1];
                  $scope.pawn[11].ct = getValue[2];
                  $scope.pawn[12].ct = getValue[3];
               // Col 4:
                  getValue = ToDown01($scope.pawn[13].ct,$scope.pawn[14].ct,$scope.pawn[15].ct,$scope.pawn[16].ct);
                  if($scope.pawn[13].ct == getValue[0] && 
                     $scope.pawn[14].ct == getValue[1] && 
                     $scope.pawn[15].ct == getValue[2] && 
                     $scope.pawn[16].ct == getValue[3])
                     flag++;
                  $scope.pawn[13].ct = getValue[0];
                  $scope.pawn[14].ct = getValue[1];
                  $scope.pawn[15].ct = getValue[2];
                  $scope.pawn[16].ct = getValue[3];
                  
               if(flag != 4) GetRandLocation();  
            }            
            /*if (ev.which==13) alert('Stop hitting return :p');*/
         }

         function ToUp01(a, b, c, d){
            //a = 4; b = 2; c= 0; d = 4;
            var list=[a,b,c,d];
            var list2 = [0,0,0,0];
            var count = 0;
            var i = 0;
            for(i = 0; i < 4; i++){
               if(list[i] != 0){
                  list2[count] = list[i];
                  count++;
               }
            }
            a = list2[0]; b = list2[1]; c = list2[2]; d = list2[3];
            if(a == b){
               a = a * 2;
               b = c;
               c = d;
               d = 0;
               $scope.point += a;
            }
            if(b == c){
               b = b * 2;
               c = d;
               d = 0;
               $scope.point += b;
            }
            if(c == d){
               c = c*2;
               d = 0;
               $scope.point += c;
            }
            list2 = [a,b,c,d];
            return list2;
         }
         
         function ToDown01(a, b, c, d){
            //a = 4; b = 2; c= 0; d = 4;
            var list=[a,b,c,d];
            var list2 = [0,0,0,0];
            var count = 3;
            var i = 0;
            for(i = 3; i >= 0; i--){
               if(list[i] != 0){
                  list2[count] = list[i];
                  count--;
               }
            }
            a = list2[0]; b = list2[1]; c = list2[2]; d = list2[3];
            if(c==d){
               d = d *2;
               c = b;
               b = a;
               a = 0;
               $scope.point += d;
            }
            if(b == c){
               c = c * 2;
               b = a;
               a = 0;
               $scope.point += c;
            }
            if(a == b){
               b = b * 2;
               a = 0;
               $scope.point += b;
            }
            list2 = [a,b,c,d];
            return list2;
         }
      }
      function GetRandom24(){
         return  Math.random() < 0.9 ? 2 : 4;;
      }
      
      function GoRandom1234(){
         //var ret = Math.floor(Math.random()*4) + 37;
         //console.log(ret);
         return Math.floor(Math.random()*4) + 37;
      }
   </script>
</body>
</html>